<!DOCTYPE html>
<html>
    <head>
        <title>Navigation Bar</title>
        <meta name="author" content="jbuhacoff">
    </head>
    <body>
            <div class="navbar-collapse collapse" style="display: none;" data-bind="visible: loginViewModel.userProfile.authenticated">
                <ul class="nav navbar-nav navbar-right">
                    <li class="active"><a href="#dashboard" data-toggle="tab">Dashboard</a></li>
                    <li><a href="#settings" data-toggle="tab">Settings</a></li>
                    <li><a href="#help" data-toggle="tab">Help</a></li>
                    <li class="dropdown">
                        <a class="dropdown-toggle" role="button" data-toggle="dropdown" href="#"><i class="glyphicon glyphicon-user"></i> <span data-bind="text: loginViewModel.userProfile.username()">Me</span> <span class="caret"></span></a>
                        <ul id="g-account-menu" class="dropdown-menu" role="menu">
                            <!-- TODO: need an extension point so we can load the profile menu item and others dynamically (logout would remain static) -->
                            <li><a href="#my_profile" data-toggle="tab">My Profile</a></li>
                            <li><a href="#logout" data-toggle="tab">Logout</a></li>
                        </ul>                
                    </li>
                </ul>
            </div>
        
<script type="text/javascript">
    // script requires:  kms_login.js  for loginViewModel
    // style requires: bootstrap, dashboard, intel
    
            console.log("navbar.html script");
            resourceLoader.loadJS(['js/knockout.js', 'js/jquery.js', 'js/kms_nav.js'], function() { 
                console.log("navbar.html: loaded scripts");
            // add our view models to the main view model defined by index.html
                mainViewModel.navigationViewModel = new NavigationViewModel();
                ko.applyBindings(mainViewModel, document.getElementById("navbar"));
            });
    

    // TODO:  instead of hard-coded dashboard, settings, help, My>profile/logout, 
    //        generate the list dynamically based on 1) available feature, 2) user preferences
    //        So... this means the ul structure is here, and each feature
    //        that wants to be represented in the menu can provide a hook that 
    //        has the complete li element (with styles/classes).
//                mainViewModel.navigationViewModel.todoLoadNavButtons({});
    
</script>
    </body>
</html>